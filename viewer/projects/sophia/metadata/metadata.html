<!DOCTYPE html>
<html>

<head>
    <title>Metadata</title>
    <link href="https://fonts.googleapis.com/css?family=Barlow+Condensed:100,200,300,400,500,600&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Alumni+Sans+Pinstripe:ital@0;1&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="metadata.css">
    <link rel="stylesheet" href="/viewer/shared/shared_styles.css">

    <script src="/viewer/libs/i18next.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next-http-backend@1.3.1/i18nextHttpBackend.min.js"></script>
</head>

<body>
    <script>
        function updateTranslations(t) {
            document.getElementById('smd0').textContent = t('panel');
            document.getElementById('smd1').textContent = t('inscriptions') + ":";
            document.getElementById('smd2').textContent = t('languages') + ":";
            //document.getElementById('smd3').textContent = t('room') + ":";
            //document.getElementById('smd4').textContent = t('tags') + ":";
            document.getElementById('smd5').textContent = t('documentation');
            document.getElementById('imd0').textContent = t('type') + ":";
            document.getElementById('imd1').textContent = t('language') + ":";
            //document.getElementById('imd2').textContent = t('tags') + ":";
            document.getElementById('imd3').textContent = t('writingsystem') + ":";
            document.getElementById('imd4').textContent = t('genre') + ":";
            document.getElementById('imd5').textContent = t('editinscription');
            document.getElementById('imd20').textContent = t('interpretation');
            document.getElementById('imd9').textContent = t('description') + ":";
            document.getElementById('imd10').textContent = t('translation');
            document.getElementById('imd11').textContent = t('contributors');
            // document.getElementById('imd12').textContent = t('date') + ":";
            document.getElementById('imd13').textContent = t('elevation') + ":";
            var translationDisplay = document.getElementById('translation-display');
            var descriptionDisplay = document.getElementById('description-display');
            var transcription = document.getElementById('transcription');

            const inscriptionTitleElement = document.getElementById('inscription-title');
            const currentText = inscriptionTitleElement.textContent.trim();

            //replace content only if it is no inscription selected
            if (currentText === 'No inscription selected' || currentText === 'Напис не вибрано') {
                inscriptionTitleElement.textContent = t('noinscription');
            }

            //check if the current text content is translation not available
            if (translationDisplay && (translationDisplay.textContent.trim() === 'Translation not available' || translationDisplay.textContent.trim() === 'Переклад недоступний')) {
                translationDisplay.innerHTML = t('translationnotavailable');
            }
            //check if the current text content is description not available
            if (descriptionDisplay && (descriptionDisplay.textContent.trim() === 'Description not available' || descriptionDisplay.textContent.trim() === 'опис недоступний')) {
                descriptionDisplay.innerHTML = t('descriptionnotavailable');
            }

            //check if the current text content is transcription not available
            if (transcription && (transcription.textContent.trim() === 'Transcription not available' || transcription.textContent.trim() === 'транскрипція недоступна')) {
                transcription.innerHTML = t('transcriptionnotavailable');
            }
        }

        function setButtonLabel(language) {
            document.getElementById('languageButton').textContent = language === 'uk' ? 'In English' : 'Українською';
        }

        function changeLanguage(lang) {
            i18next.changeLanguage(lang, function (err, t) {
                if (err) {
                    console.error("Error changing language:", err);
                    return;
                }
                window.parent.postMessage({ type: 'languageChange', lang: lang }, "*");
                localStorage.setItem('i18nextLang', lang);
                setButtonLabel(lang);
                updateTranslations(t);
            });
        }

        function toggleLanguage() {
            let currentLanguage = localStorage.getItem('i18nextLang') || 'en';
            currentLanguage = currentLanguage === 'en' ? 'uk' : 'en';
            changeLanguage(currentLanguage);
            toggleVisibility(currentLanguage);
        }

        function toggleVisibility(lang) {
            document.getElementById('documentation_en').style.display = lang === 'en' ? 'block' : 'none';
            document.getElementById('documentation_uk').style.display = lang === 'uk' ? 'block' : 'none';
        }

        document.addEventListener('DOMContentLoaded', function () {
            const savedLang = localStorage.getItem('i18nextLang') || 'en';

            i18next.use(i18nextHttpBackend).init({
                lng: savedLang,
                fallbackLng: 'en',
                backend: {
                    loadPath: '/viewer/locales/{{lng}}/translation.json',
                },
            }, function (err, t) {
                if (err) {
                    console.error("i18next initialization error:", err);
                    return;
                }
                setButtonLabel(savedLang);
                updateTranslations(t);
                toggleVisibility(savedLang);
            });
        });
    </script>


    <div class="container">
        <div class="border"></div>

        <div class="language-toggle-buttons">
            <button id="languageButton" title="Change language" onclick="toggleLanguage()"></button>
        </div>

        <div class="metadata-text">
            <div class="metadata-surface">

                <div class="metadata-surface-title">
                    <div id="smd0" style="display:inline;">Surface</div> PLACEHOLDER_TITLE
                </div>


                <div class="metadata-content">
                    <div class="metadata-item">
                        <div class="label" id="smd1"></div>
                        <div class="theme-color-text tag">PLACEHOLDER_INSCRIPTIONS</div>
                    </div>


                    <div class="metadata-item">
                        <div class="label" id="smd2"></div>
                        <div class="theme-color-text tag">PLACEHOLDER_LANGUAGES</div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="">Section:</div>
                        <div class="theme-color-text tag">North Gallery</div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="imd22">Medium and Material:</div>
                        <div class="theme-color-text tag" id="">Wall | Plaster</div>
                    </div>

                    <!--   <div class="metadata-item">
                        <div class="label" id="smd4"></div>
                        <div class="theme-color-text tag" id="panel_tags"></div>
                    </div> -->
                </div>

                <div class="metadata-description">
                    <div class="metadata-title" id="smd5"></div>
                    <div class="label" id="documentation_en">PLACEHOLDER_DOCUMENTATION_EN</div>
                    <div class="label" id="documentation_uk">PLACEHOLDER_DOCUMENTATION_UK</div>
                </div>
            </div>
            <div class="metadata-inscription">
                <div class="image-container">
                    <!-- Insert image carousel text -->
                </div>

                <div class="metadata-inscription-title">
                    <div class="metadata-inscription-title-part" id="inscription-title">
                        No inscription selected
                    </div>
                </div>

                <div class="metadata-edit-button">
                    <a id="edit-link" target="_blank">
                        <div class="theme-button" id="imd5" title="Edit the inscription's metadata"
                            style="margin-top:20px; padding:6px 15px; text-align:center; width:auto; color:white; font-size:13px;">
                        </div>
                    </a>
                </div>

                <div class="metadata-content" style="padding-top:0px;">

                    <div class="metadata-item">
                        <div class="label" id="imd0">Type:</div>
                        <div class="theme-color-text tag" id="type"></div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="imd9">Description:</div>
                        <div class="theme-color-text tag" id="tags"></div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="imd4">Genre:</div>
                        <div class="theme-color-text tag" id="genre"></div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="imd1">Language:</div>
                        <div class="theme-color-text tag" id="language"></div>
                    </div>

                    <div class="metadata-item">
                        <div class="label" id="imd3">Writing system:</div>
                        <div class="theme-color-text tag" id="writing"></div>
                    </div>





                    <div class="metadata-columns" style="margin-top:20px;">

                        <div class="left-column">
                            <div class="metadata-description" style="margin-top:0px;">
                                <div class="metadata-title" id="">Textual Graffiti</div>
                                <div id="diplomatic" class="metadata-description-text" style="margin-top:-5px">
                                </div>
                            </div>

                            <div class="metadata-description" style="margin-top:0px;">
                                <div class="metadata-title" id="imd20">Interpretative edition</div>
                                <div id="interpretation" class="metadata-description-text" style="margin-top:-5px">
                                </div>
                            </div>
                        </div>

                        <div class="right-column metadata-description">
                            <div class="metadata-title" id="imd24">Romanisation</div>
                            <div id="romanisation" class="metadata-description-text" style="margin-top:-5px"></div>

                            <div class="metadata-description" style="margin-top:0px;">
                                <div class="metadata-title-row">
                                    <div class="metadata-title" id="imd10">Translation</div>
                                    <div id="translation-dropdown"></div>
                                </div>
                                <div id="translation-display" class="metadata-description-text"></div>
                            </div>
                        </div>

                    </div>

                    <div class="division"> </div>
                    <div class="metadata-columns" >
                        <div class="left-column">

                            <div class="metadata-item">
                                <div class="label" id="imd23">Condition:</div>
                                <div class="theme-color-text tag" id="date">Fragment, Damaged</div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="imd23">Alignment:</div>
                                <div class="theme-color-text tag" id="date">Aligns, Declines</div>
                            </div>


                            <div class="metadata-item">
                                <div class="label" id="imd23">Lines and letters:</div>
                                <div class="theme-color-text tag" id="date">2 | 31</div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="imd13">Elevation (cm):</div>
                                <div class="theme-color-text tag" id="elevation"></div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="imd24">Dimensions (mm):</div>
                                <div class="theme-color-text tag" id="">100 x 400</div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="">Extra-alphabetical signs:</div>
                                <div class="theme-color-text tag" id="">Cross</div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="">Dating:</div>
                                <div class="theme-color-text tag" id="date">13th century</div>
                            </div>

                            <div class="metadata-item">
                                <div class="label" id="">Dating Criteria:</div>
                                <div class="theme-color-text tag" id="date">Paleography</div>
                            </div>

                            <div class="metadata-item">

                                <div class="metadata-dropdown theme-color-text red-arrow">
                                    <span>Overlapping inscriptions</span>
                                    <div class="metadata-dropdown-content">
                                        <p>120-19c:14</p>
                                        <p>120-19c:13</p>
                                        <p>120-19c:16</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="right-column">

                            <div class="metadata-description">
                                <div class="metadata-title-row">
                                    <div class="metadata-title" id="">Comments</div>
                                    <div id="description-dropdown"></div>
                                </div>
                                <div id="description-display" class="metadata-description-text"></div>
                            </div>
                        </div>

                        <div class="division"> </div>


                        <div class="metadata-description" style="margin-top:-5px">
                            <div class="metadata-title" id="">Bibliography</div>
                            <div id="" class="metadata-description-text contributors"></div>
                        </div>


                        <div class="metadata-description">
                            <div class="metadata-title" id="imd11">Contributors</div>
                            <div id="contributors" class="metadata-description-text contributors"></div>
                        </div>


                    </div>

                </div>
            </div>
</body>

</html>